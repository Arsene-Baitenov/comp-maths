# Отчёт о проведённых экспериментах

## Оборудование
 - Процессор: Intel(R) Core(TM) i5-8250U CPU @ 1.60GHz;
    - 1800 МГц;
    - 4 ядра;
    - 8 логических процессоров;
 - Оперативная память: 8.0 GB;
 - Операционная система: Windows 11.

## Эксперименты
В экспериментах использовались следующие функции:
 - $f_1(x, y) = 52$
 - $f_1(x, y) = 2x + 6y$
 - $f_1(x, y) = 2x^3 + 6y^3$
 - $f_1(x, y) = sin(x) - cos(y)$

Такие функции выбраны из-за следующих признаков соответсвенно: константа, простая функция, кубическая функция с большим разбросом значений на отрезке $[0;1]$, тригонометрическая функция.

Для каждого измерения проводилось по 10 запусков, значения получены путём вычисления среднего арифметического.

В качестве результатов предлагается рассматривать пары значений: время аппроксимации в секундах и вычислительная ошибка, в формате (t: $time$) (e: $error$).

# Зависимоть времени вычисления и ошибки от начальных значений сетки
Гипотеза: результаты измерений могут меняться в зависимости от начальных значений сетки.

Для проверки гипотеза использовалось три стратегии заполнения сетки:
 - нулями (zero);
 - случайными значениями в пределах граничных значений (rand);
 - средним арифметическим граничных значений (average).

Количество потоков: 6.
Размер блока: 64.
Погрешность: 1e-2.

Таблица измерений для $f_1$:
| net size | 64 | 128 | 256 | 512 |
|-|-|-|-|-|
| zero | (t: 0.358) (e: 0.0343065) | (t: 2.283) (e: 0.134198) | (t: 3.937) (e: 0.535663) | (t: 12.65) (e: 0.749921) |
| rand | (t: 0.016) (e: 0.00180117) | (t: 0.0680001) (e: 0.0010039) | (t: 0.157) (e: 0.000527782) | (t: 0.5) (e: 0.000270348) |
| average | (t: ~0) (e: 0) | (t: ~0) (e: 0) | (t: ~0) (e: 0) | (t: 0.0079999) (e: 0) |

В последних двух измерениях уменьшение времени и ошибки объясняется, тем что начальные значения близки или совпадают со значениями функции $f_1$.

Таблица измерений для $f_2$:
| net size | 64 | 128 | 256 | 512 |
|-|-|-|-|-|
| zero | (t: 0.0740001) (e: 0.422804) | (t: 0.232) (e: 0.668313) | (t: 0.611) (e: 0.81808) | (t: 2.044) (e: 0.903705) |
| rand | (t: 0.0369999) (e: 0.183754) | (t: 0.121) (e: 0.35213) | (t: 0.322) (e: 0.491644) | (t: 1.092) (e: 0.587503) |
| average | (t: 0.0339999) (e: 0.186161) | (t: 0.112) (e: 0.352137) | (t: 0.324) (e: 0.490346) | (t: 1.101) (e: 0.589625) |

Можно заметить что и время, и ошибка в rand и average отличается от zero примерно в 2 раза, это можно объяснить также как и в предыдущем случае.

Таблица измерений для $f_3$:
| net size | 64 | 128 | 256 | 512 |
|-|-|-|-|-|
| zero | (t: 0.053) (e: 0.550659) | (t: 0.193) (e: 0.70822) | (t: 0.52) (e: 0.827742) | (t: 1.796) (e: 0.905567) |
| rand | (t: 0.0410001) (e: 5.54331) | (t: 0.109) (e: 14.5315) | (t: 0.313) (e: 30.5489) | (t: 0.907) (e: 62.5697) |
| average | (t: 0.0309999) (e: 4.92825) | (t: 0.109) (e: 10.7847) | (t: 0.297) (e: 21.4765) | (t: 1.195) (e: 42.9553) |

Можно заметить, что время вычисления отличается не сильно, в то время как ошибка в случае zero набного меньше. Это объясняется тем, что на отрезке $[0;1]$ функция имеет большое разброс значений, а также значения на границах сильно меняются.

Таблица измерений для $f_4$:
| net size | 64 | 128 | 256 | 512 |
|-|-|-|-|-|
| zero | (t: 0.00899982) (e: 1.01551) | (t: 0.013) (e: 0.997563) | (t: 0.0369999) (e: 0.998748) | (t: 0.082) (e: 0.999442) |
| rand | (t: 0.0150001) (e: 2.36605) | (t: 0.016) (e: 1.99744) | (t: 0.0149999) (e: 2.2304) | (t: 0.0780001) (e: 2.55097) |
| average | (t: ~0) (e: 2.16256) | (t: 0.0150001) (e: 1.86631) | (t: 0.0309999) (e: 2.03052) | (t: 0.0780001) (e: 2.30857) |

В отличие результатов для функции $f_3$ результаты для функции $f_4$ более сбалансированы.

Таким образом, можно сказать что стратегия заполнения начальных значений сетки может по-разному влиять на время и ошибку аппроксимации в зависимости от целевой функции.

Далее для каждой функции будет использоваться своя стратегия:
 - $f_1$: rand;
 - $f_2$: rand;
 - $f_3$: zero;
 - $f_4$: zero.

# Зависимоть времени вычисления и ошибки от погрешности и размера сетки
Гипотезы:
 1. при уменьшении погрешности увеличится время исполнения и уменьшится ошибка;
 2. при увеличении размера сетки увеличится время исполнения и уменьшится ошибка;

Количество потоков: 6.
Размер блока: 32.

Таблица измерений для $f_1$:
| net size | 32 | 64 | 128 | 256 |
|-|-|-|-|-|
| eps=1e-1 | (t: ~0) (e: 0.00608826) | (t: 0.0149999) (e: 0.00341822) | (t: 0.0150001) (e: 0.00180264) | (t: 0.0469999) (e: 0.000924699) |
| eps=1e-3 | (t: 0.0319998) (e: 0.000789268) | (t: 0.0780001) (e: 0.000820555) | (t: 0.203) (e: 0.000522297) | (t: 0.5) (e: 0.000288419) |
| eps=1e-6 | (t: 0.125) (e: 0.000000899696) | (t: 1.001) (e: 0.00000342721) | (t: 4.829) (e: 0.0000132874) | (t: 16.991) (e: 0.0000274861) |

Таблица измерений для $f_2$:
| net size | 32 | 64 | 128 | 256 |
|-|-|-|-|-|
| eps=1e-1 | (t: ~0) (e: 0.265843) | (t: ~0) (e: 0.421104) | (t: 0.0149999) (e: 0.552845) | (t: 0.0470002) (e: 0.630745) |
| eps=1e-3 | (t: 0.0309999) (e: 0.00761428) | (t: 0.178) (e: 0.0222526) | (t: 0.844) (e: 0.0892313) | (t: 2.719) (e: 0.246973) |
| eps=1e-6 | (t: 0.141) (e: 0.0000140622) | (t: 0.888) (e: 0.0000525488) | (t: 5.909) (e: 0.000159388) | (t: 54.223) (e: 0.000254048) |

Таблица измерений для $f_3$:
| net size | 32 | 64 | 128 | 256 |
|-|-|-|-|-|
| eps=1e-1 | (t: 0.0159998) (e: 0.680525) | (t: ~0) (e: 0.800765) | (t: 0.016) (e: 0.888465) | (t: 0.062) (e: 0.939769) |
| eps=1e-3 | (t: 0.0470002) (e: 0.102801) | (t: 0.281) (e: 0.236253) | (t: 1.22) (e: 0.414811) | (t: 4.236) (e: 0.597824) |
| eps=1e-6 | (t: 0.141) (e: 0.000127889) | (t: 1.473) (e: 0.000483081) | (t: 11.68) (e: 0.00187557) | (t: 110.22) (e: 0.00733102) |

Таблица измерений для $f_4$:
| net size | 32 | 64 | 128 | 256 |
|-|-|-|-|-|
| eps=0.1 | (t: ~0) (e: 1.00809) | (t: ~0) (e: 1.00644) | (t: ~0) (e: 1.00211) | (t: ~0) (e: 1.00111) |
| eps=0.001 | (t: 0.00999999) (e: 1.23117) | (t: 0.0150001) (e: 1.14924) | (t: 0.0780001) (e: 1.00027) | (t: 0.219) (e: 0.995377) |
| eps=1e-06 | (t: 0.0929999) (e: 1.44796) | (t: 0.876) (e: 1.66636) | (t: 6.032) (e: 1.4189) | (t: 47.679) (e: 1.47923) |

Выводы:
 1. Первая гипотеза о зависимости времени и ошибки аппроксимации от погрешности, что более чем логично, если учитывать алгоритм;
 2. Также можно утверждать что увеличение размера сетки действительно увеличивает время аппроксимации, однако нет прямой зависимости с ошибкой апрокцимации:
    - для функции $f_4$ ошибка почти не меняется;
    - для функций $f_2$ и $f_3$ ошибка возратает с ростом размера сетки;
    - для функции $f_1$ с ростом размера сетки ошибка ведёт себя по-разному при разных значениях погрешности.

# Зависимоть времени вычисления и ошибки от размера блока
Предполагается, что при фиксированном размере сетки с ростом размера блока время аппроксимации будет сначала убывать а потом возрастать.

Количество потоков: 6.
Размер сетки: 256.
Погрешность: 1e-3.

| block size \ fun | $f_1$ | $f_2$ | $f_3$ | $f_4$ |
|-|-|-|-|-|
| 4 | (t: 2.375) (e: 0.000288419) | (t: 13.971) (e: 0.246973) | (t: 20.127) (e: 0.597824) | (t: 1.063) (e: 0.995377) |
| 8 | (t: 1.297) (e: 0.000288419) | (t: 8.251) (e: 0.246973) | (t: 13.062) (e: 0.597824) | (t: 0.609) (e: 0.995377) |
| 16 | (t: 0.751) (e: 0.000288419) | (t: 4.935) (e: 0.246973) | (t: 7.797) (e: 0.597824) | (t: 0.36) (e: 0.995377) |
| 32 | (t: 0.499) (e: 0.000288419) | (t: 3.241) (e: 0.246973) | (t: 5.19) (e: 0.597824) | (t: 0.235) (e: 0.995377) |
| 64 | (t: 0.438) (e: 0.000288419) | (t: 2.891) (e: 0.246973) | (t: 4.878) (e: 0.597824) | (t: 0.204) (e: 0.995377) |
| 128 | (t: 0.641) (e: 0.000288419) | (t: 3.413) (e: 0.246973) | (t: 5.489) (e: 0.597824) | (t: 0.297) (e: 0.995377) |
| 256 | (t: 0.703) (e: 0.000288419) | (t: 3.61) (e: 0.246973) | (t: 5.926) (e: 0.597824) | (t: 0.328) (e: 0.995377) |

Для размера сетки 256 оптимальным явлется размер блока 64. Кроме того можно отметить, что при изменение размера блока ошибка аппроксимации не изменяется.